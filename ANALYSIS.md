# Анализ технического задания и кейса

## Общая информация

**Название проекта:** Сервис распознавания содержимого платежных счетов

**Хакатон:** Всероссийский хакатон связи 2025

**Заказчик:** ООО «К ТЕЛЕКОМ»

## Цель проекта

Разработать специализированный сервис (телеграм-бот), способный автоматически извлекать структурированную информацию из сканов платежных документов (PDF) для уменьшения временных затрат на ручную обработку финансовых данных.

## Требования к продукту

### 1. Серверная система (Backend)
- **HTTP-endpoint** для загрузки PDF-файла со сканом платежного счета
- Возвращает **JSON-объект** со структурой документа
- Поддержка многоуровневой вложенности данных (дочерние JSON-объекты)
- Обработка нераспознанных полей:
  - Если значение не распознано → записывается спецслово (устанавливается командой)
  - Если наименование поля не распознано → поле не включается в JSON
- Хранение истории запросов **не предусматривается**

### 2. Телеграм-бот
- Единственная функция: загрузка PDF-файла
- Передача файла серверной системе
- Обработка ответов:
  - **2xx/3xx**: JSON дублируется в текст ответного сообщения со специальным форматированием
  - **5xx**: записывается установленная командой спецфраза
  - **4xx**: записывается фраза из списка установленных командой для конкретной ошибки

### 3. Jupyter-notebook
- Демонстрация работоспособности выбранной модели
- Демонстрация работоспособности общего пайплайна обработки файла
- Интерпретация результатов работы модели
- При обучении/дообучении модели: демонстрация процесса обучения

## Критерии приемки

1. ✅ Приложение контейнеризовано и запускается консольной командой в изолированной среде
2. ✅ Пайплайн обработки PDF-документа корректно работает (демонстрация в Jupyter-notebook)
3. ✅ ТГ-бот и серверная часть корректно взаимодействуют без непредвиденных сбоев
4. ✅ ТГ-бот и серверная часть корректно реализуют все сценарии работы

## Технические требования

### Языки программирования
- **Модель ML**: Python 3.x или C++
- **Backend**: Go или Python
- **Контейнеризация**: Docker, Docker Compose

### Библиотеки и инструменты
- Обработка PDF: PyMuPDF (fitz), pdfplumber, pdfminer
- OCR: Tesseract OCR, EasyOCR, PaddleOCR
- Компьютерное зрение: OpenCV, PIL/Pillow
- ML/Deep Learning: PyTorch, TensorFlow, scikit-learn
- Telegram Bot: python-telegram-bot, aiogram
- Backend: FastAPI, Flask (Python) или Gin, Echo (Go)

## Структура данных (JSON)

Требуется извлечь структурированные данные из платежных счетов. Типичные поля:
- Номер счета
- Дата
- Плательщик
- Получатель
- Сумма
- Назначение платежа
- Реквизиты банка
- И другие поля в зависимости от формата счета

## Этапы разработки

1. **Разработка и обучение модели ML**
   - Подготовка датасета
   - Обучение модели распознавания
   - Валидация и метрики

2. **Реализация backend-сервиса**
   - HTTP API (FastAPI/Flask)
   - Интеграция модели
   - Обработка PDF
   - Извлечение и структурирование данных

3. **Разработка телеграм-бота**
   - Загрузка файлов
   - Взаимодействие с backend
   - Форматирование ответов

4. **Контейнеризация**
   - Dockerfile для каждого компонента
   - Docker Compose для оркестрации

5. **Документация и ноутбуки**
   - Jupyter notebooks с демонстрацией
   - README с инструкциями

## Рекомендации по реализации

### Подход к распознаванию
1. **Извлечение текста из PDF**
   - Использовать PyMuPDF или pdfplumber для текстовых PDF
   - Tesseract OCR для сканированных изображений

2. **Обработка и структурирование**
   - Парсинг текста с помощью регулярных выражений
   - Использование NLP для извлечения сущностей
   - ML-модель для классификации полей

3. **Альтернативные подходы**
   - Использование готовых OCR сервисов (Google Vision API, AWS Textract)
   - Fine-tuning предобученных моделей для документов
   - Использование специализированных библиотек (docTR, LayoutLM)

### Архитектура решения

```
┌─────────────────┐
│  Telegram Bot   │
└────────┬────────┘
         │
         │ HTTP Request (PDF)
         ▼
┌─────────────────┐
│   Backend API   │
│   (FastAPI)     │
└────────┬────────┘
         │
         ├──► PDF Parser
         ├──► OCR Engine
         ├──► ML Model
         └──► JSON Formatter
```

## Важные замечания

1. **Обработка ошибок**: Четкая обработка всех сценариев (2xx, 3xx, 4xx, 5xx)
2. **Спецслова**: Определить заранее спецслова для нераспознанных полей
3. **Форматирование**: JSON в Telegram должен быть читаемым
4. **Производительность**: Оптимизация времени обработки
5. **Масштабируемость**: Возможность обработки множественных запросов

## Следующие шаги

1. Создать структуру проекта
2. Настроить окружение разработки
3. Выбрать и протестировать библиотеки для OCR
4. Разработать прототип модели
5. Реализовать backend API
6. Разработать Telegram бота
7. Настроить Docker контейнеры
8. Подготовить документацию

